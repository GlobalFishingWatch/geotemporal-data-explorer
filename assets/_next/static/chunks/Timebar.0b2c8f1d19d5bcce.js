(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{73591:function(e,t,n){"use strict";n.d(t,{OC:function(){return m},R9:function(){return g},ez:function(){return h}});var a=n(66383),r=n(2784),i=n(53476),o=n(61636),l=n(55988),s=n(43807),u=n(57256),c=n(42055),d=(0,i.atom)({key:"mapBounds",default:void 0});function m(e,t){return!(!e||!t)&&(e.north===t.north&&e.south===t.south&&e.west===t.west&&e.east===t.east)}function g(){var e=(0,l.Z)(),t=(0,s.bS)(),n=(0,a.Z)((0,i.useRecoilState)(d),2),o=n[0],c=n[1],m=(0,u.Sj)().viewport,g=(0,r.useCallback)((function(){if(e){var t=e.getBounds();t&&c({north:(n=t).getNorth(),south:n.getSouth(),west:n.getWest(),east:n.getEast()})}var n}),[e,c]);return(0,r.useEffect)((function(){m&&g()}),[m,g]),(0,r.useEffect)((function(){t&&g()}),[t,g]),o}function h(){var e=(0,l.Z)(),t=(0,u.Sj)().setMapCoordinates,n=(0,r.useCallback)((function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.mapWidth,i=a.mapHeight,l=a.padding,s=void 0===l?60:l,u=r||(e?parseInt(e.getCanvas().style.width):window.innerWidth/2),d=i||(e?parseInt(e.getCanvas().style.height):window.innerHeight-c.Ry),m=(0,o.Xg)({bounds:[[n[0],n[1]],[n[2],n[3]]],width:u,height:d,padding:s}),g=m.latitude,h=m.longitude,f=m.zoom;t({latitude:g,longitude:h,zoom:Math.max(0,f)})}),[e,t]);return n}},57256:function(e,t,n){"use strict";n.d(t,{C:function(){return v},Sj:function(){return h},zg:function(){return f}});var a=n(70865),r=n(66383),i=n(2784),o=n(53476),l=n(68578),s=n(19102),u=n(85242),c=n(42055),d=(0,s.Ry)({latitude:(0,s.Rx)(),longitude:(0,s.Rx)(),zoom:(0,s.Rx)()}),m=(0,o.atom)({key:"viewport",default:c.Ps,effects:[(0,l.urlSyncEffect)({refine:d,history:"replace"})]}),g=(0,o.atom)({key:"localViewport",default:m,effects:[]});function h(){var e=(0,r.Z)((0,o.useRecoilState)(g),2),t=e[0],n=e[1],l=(0,i.useCallback)((function(e){n((function(t){return(0,a.Z)({},t,e)}))}),[]);return{viewport:t,onViewportChange:(0,i.useCallback)((function(e){var t=e.viewState,a=t.latitude,r=t.longitude,i=t.zoom;a&&r&&i&&n({latitude:a,longitude:r,zoom:i})}),[]),setMapCoordinates:l}}var f=function(){var e=(0,o.useRecoilValue)(g),t=(0,o.useSetRecoilState)(m),n=(0,u.Nr)(e,c.rF);(0,i.useEffect)((function(){t(n)}),[n,t])},v=function(){return(0,o.useRecoilValue)(m)}},51472:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return An}});var a=n(66383),r=n(52322),i=n(2784),o=n(99490),l=n(28879),s=n.n(l),u=".35s",c="SEEK_MOVE",d="SEEK_RELEASE",m="ZOOM_OUT_MOVE",g="ZOOM_OUT_RELEASE",h="ZOOM_IN_RELEASE",f="MOUNT",v="TIME_RANGE_SELECTOR",p="ZOOM_IN_BUTTON",b="ZOOM_OUT_BUTTON",y="PLAYBACK_FRAME",k=function(e){return new Date(e).getTime()},w=function(e,t,n,a,r){var i,o=k(e),l=k(t),s=k(a),u=k(r),c=e,d=t;return o<s?(c=a,d=new Date(s+n).toISOString(),i="start"):l>u&&(d=r,c=new Date(u-n).toISOString(),i="end"),{newStartClamped:c,newEndClamped:d,clamped:i}},S=function(e,t){return k(t)-k(e)},_=function(e,t){return S(e,t)/1e3/60/60/24},O=function(e,t){return _(e,t)>1},x=function(e,t){return O(e,t)?"MMM D YYYY":"MMM D YYYY HH:mm"},M=function(e,t){var n=s()(e).utc(),a=n.startOf(t),r=n.endOf(t);return(k(e)-a.valueOf()>r.valueOf()-k(e)?r:a).toISOString()},j=function(e,t,n){return{start:s()(new Date(n)).utc().subtract(e,t).toISOString(),end:s()(new Date(n)).utc().toISOString()}},E=function(e,t,n){for(var a,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.add(6,"day");return"".concat(e.format("MMM")," ").concat(e.format("D"),"-").concat(n.format("D")," ").concat(t?e.format("YYYY"):"")},i={year:{isFirst:function(){return!1},formats:[[0,"YYYY"]]},month:{isFirst:function(e){return 0===e.month()},formats:[[200,"MMMM YYYY"],[100,"MMMM","MMM YYYY"],[0,"MMM","MMM YY"]]},week:{isFirst:function(e){return 1===e.date()},formats:[[0,function(e){return r(e)},function(e){return r(e,!0)}]]},day:{isFirst:function(e){return 1===e.date()},formats:[[999,"ddd D MMMM YYYY"],[200,"ddd D MMMM"],[70,"ddd D","MMM 1"],[0,"D","MMM"]]},hour:{isFirst:function(e){return 0===e.hour()},formats:[[999,"ddd D MMMM YYYY H[H]"],[0,"H[H]","ddd D"]]}},o=i[t],l=0;l<o.formats.length;l+=1){if(n>o.formats[l][0]){a=o.formats[l];break}}if(!a)return e.format();var s=o.isFirst(e)&&a[2]?a[2]:a[1];return"function"===typeof s?s(e):e.format(s)},Z=(0,i.createContext)({}),C=(0,i.createContext)({immediate:!1,toggleImmediate:function(){}}),R=n(13706),I=n(90581),D=n(27805),T=n(47842),L=n(64297),P=n(58408),F=n(13980),A=n.n(F),N=n(72779),z=n.n(N),Y=n(36631),B=n(77491),q=n.n(B),U=n(10264),X=n.n(U),W=(n(16017),n(79457),n(21295),n(67888),n(53476)),V=n(20422),H=n.n(V),G=n(97113),K=n(57735),J=n.n(K),Q=function(e){(0,L.Z)(n,e);var t=(0,P.Z)(n);function n(e){var a;(0,I.Z)(this,n),a=t.call(this,e),(0,T.Z)((0,R.Z)(a),"onLastXSelect",(function(e){var t=a.props.latestAvailableDataDate,n=j(e.num,e.unit,t),r=n.start,i=n.end;a.setState({currentLastXSelectedOption:e}),a.setState({start:r,end:i})})),(0,T.Z)((0,R.Z)(a),"onStartChange",(function(e,t){var n,r;if((null===(n=e.target)||void 0===n?void 0:n.value)&&""!==(null===(r=e.target)||void 0===r?void 0:r.value)){var i=s()([e.target.value,"T00:00:00.000Z"].join("")).utc().toISOString(),o=e.target.validity.valid,l=i<t;a.setState({startValid:o&&l,endValid:l}),a.setState({start:i})}})),(0,T.Z)((0,R.Z)(a),"onEndChange",(function(e,t){var n,r;if((null===(n=e.target)||void 0===n?void 0:n.value)&&""!==(null===(r=e.target)||void 0===r?void 0:r.value)){var i=s()([e.target.value,"T00:00:00.000Z"].join("")).utc().toISOString(),o=e.target.validity.valid,l=t<i;a.setState({endValid:o&&l,startValid:l}),a.setState({end:i})}}));var r=e.start,i=e.end,o=e.labels;return a.lastXOptions=[{id:"last30days",label:o.last30days||n.defaultProps.labels.last30days,num:30,unit:"day"},{id:"last3months",label:o.last3months||n.defaultProps.labels.last3months,num:3,unit:"month"},{id:"last6months",label:o.last6months||n.defaultProps.labels.last6months,num:6,unit:"month"},{id:"lastYear",label:o.lastYear||n.defaultProps.labels.lastYear,num:1,unit:"year"}],a.state={start:r,end:i,startValid:!0,endValid:!0,currentLastXSelectedOption:a.lastXOptions[0]},a}return(0,D.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.start,n=e.end;this.setState({start:t,end:n})}},{key:"submit",value:function(e,t){(0,this.props.onSubmit)(s()(e).utc().startOf("day").toISOString(),s()(t).utc().startOf("day").toISOString())}},{key:"render",value:function(){var e=this,t=this.state,n=t.start,a=t.end,i=t.startValid,o=t.endValid,l=t.currentLastXSelectedOption,u=this.props,c=u.labels,d=u.absoluteStart,m=u.absoluteEnd;if(void 0===n)return null;var g={min:s()(k(d)).toISOString().slice(0,10),max:s()(k(m)).toISOString().slice(0,10)},h=s()(n).utc(),f=s()(a).utc(),v=!i||!o;return(0,r.jsxs)("div",{className:J().TimeRangeSelector,children:[(0,r.jsx)("div",{className:J().veil,onClick:this.props.onDiscard}),(0,r.jsxs)("div",{className:J().inner,children:[(0,r.jsx)("h2",{className:J().title,children:c.title}),(0,r.jsxs)("div",{className:J().selectorsContainer,children:[(0,r.jsxs)("div",{className:J().selectorGroup,children:[(0,r.jsx)("span",{className:J().selectorLabel,children:c.start}),(0,r.jsx)(G.U7,{value:h.toISOString().slice(0,10),invalid:!i,onChange:function(t){return e.onStartChange(t,a)},min:g.min,max:g.max,className:J().input,required:!0})]}),(0,r.jsxs)("div",{className:J().selectorGroup,children:[(0,r.jsx)("span",{className:J().selectorLabel,children:c.end}),(0,r.jsx)(G.U7,{value:f.toISOString().slice(0,10),invalid:!o,onChange:function(t){return e.onEndChange(t,n)},min:g.min,max:g.max,className:J().input,required:!0})]})]}),(0,r.jsxs)("div",{className:J().actions,children:[(0,r.jsx)(G.Ph,{className:z()(J().cta,J().lastX),direction:"top",options:this.lastXOptions,selectedOption:l,onSelect:function(t){e.onLastXSelect(t)}}),(0,r.jsx)("button",{type:"button",disabled:v,className:z()(J().cta,(0,T.Z)({},J().disabled,v)),onClick:function(){e.submit(n,a)},children:c.done})]})]})]})}}]),n}(i.Component);Q.propTypes={onSubmit:A().func.isRequired,start:A().string.isRequired,end:A().string.isRequired,absoluteStart:A().string.isRequired,absoluteEnd:A().string.isRequired,latestAvailableDataDate:A().string.isRequired,onDiscard:A().func.isRequired,labels:A().shape({title:A().string,start:A().string,end:A().string,last30days:A().string,last3months:A().string,last6months:A().string,lastYear:A().string,done:A().string})},Q.defaultProps={labels:{title:"Select a time range",start:"start",end:"end",last30days:"Last 30 days",last3months:"Last 3 months",last6months:"Last 6 months",lastYear:"Last year",done:"done"}};var $,ee=Q,te=n(37932),ne=n(76635),ae=n(32706),re=n(97209),ie=["title","titleId"];function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oe.apply(this,arguments)}function le(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var se,ue=function(e,t){var n=e.title,a=e.titleId,r=le(e,ie);return i.createElement("svg",oe({width:11,height:14,viewBox:"0 0 11 14",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,$||($=i.createElement("path",{stroke:"#FFF",strokeWidth:1.5,fill:"#FFF",d:"M1 1h9v12l-4.5-3L1 13z",fillRule:"evenodd",strokeLinejoin:"round"})))},ce=(0,i.forwardRef)(ue),de=["title","titleId"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},me.apply(this,arguments)}function ge(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var he,fe=function(e,t){var n=e.title,a=e.titleId,r=ge(e,de);return i.createElement("svg",me({width:11,height:14,viewBox:"0 0 11 14",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,se||(se=i.createElement("path",{d:"M10.477.738V2.25H0V.738h2.602L3.375 0h3.727l.773.738h2.602zM.738 11.988v-9h9v9c0 .399-.152.75-.457 1.055-.304.305-.656.457-1.054.457H2.25c-.398 0-.75-.152-1.055-.457-.304-.305-.457-.656-.457-1.055z",fill:"#FFF",fillRule:"evenodd"})))},ve=(0,i.forwardRef)(fe),pe=["title","titleId"];function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},be.apply(this,arguments)}function ye(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ke=function(e,t){var n=e.title,a=e.titleId,r=ye(e,pe);return i.createElement("svg",be({width:6,height:10,viewBox:"0 0 6 10",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,he||(he=i.createElement("path",{d:"M5 1L1 5l4 4",stroke:"#FFF",strokeWidth:1.5,fill:"none"})))},we=(0,i.forwardRef)(ke),Se=n(62428),_e=n.n(Se),Oe=function(e){var t,n,a,o=e.labels,l=e.placement,u=e.scale,c=e.bookmarkStart,d=e.bookmarkEnd,m=e.minX,g=e.maxX,h=e.onSelect,f=e.onDelete,v=(0,i.useContext)(C).immediate,p=u(new Date(c)),b=u(new Date(d))-p,y=function(e,t){var n=x(e,t),a=s()(e).utc(),r=s()(t).utc();return{humanizedStart:a.format(n),humanizedEnd:r.format(n),interval:r.diff(a,"day")}}(c,d),k=[y.humanizedStart,y.humanizedEnd].join(" - "),w=p,S=b;p<m&&(w=m,S=p+S,t=!0,n=!0),w+b>g&&(S=g-(w=Math.min(w,g-52)),t=!0,a=!0);var _,O=!0===t?52:32,M=(S=Math.max(O,S))<240,j=S<=32;return(0,r.jsxs)("div",{className:z()(_e().Bookmark,(_={},(0,T.Z)(_,_e().bottomPlacement,"bottom"===l),(0,T.Z)(_,_e()._overflowingLeft,n),(0,T.Z)(_,_e()._overflowingRight,a),(0,T.Z)(_,_e()._compact,M),(0,T.Z)(_,_e()._point,j),(0,T.Z)(_,_e()._immediate,v),_)),style:{left:w,width:S},children:[(0,r.jsxs)("button",{type:"button",title:o.goToBookmark,className:_e().main,onClick:h,children:[n&&(0,r.jsx)(we,{className:_e().leftArrow}),(0,r.jsx)(ce,{className:_e().icon}),!1===M&&(0,r.jsx)("span",{className:_e().title,children:k}),a&&(0,r.jsx)(we,{className:_e().rightArrow})]}),!1===M&&(0,r.jsx)("button",{type:"button",title:o.deleteBookmark,className:_e().delete,onClick:f,children:(0,r.jsx)(ve,{})})]})};Oe.propTypes={labels:A().shape({goToBookmark:A().string,deleteBookmark:A().string}),placement:A().string,bookmarkStart:A().string.isRequired,bookmarkEnd:A().string.isRequired,scale:A().func.isRequired,minX:A().number.isRequired,maxX:A().number.isRequired,onSelect:A().func.isRequired,onDelete:A().func.isRequired},Oe.defaultProps={placement:"top",labels:{goToBookmark:"Go to your bookmarked time range",deleteBookmark:"Delete time range bookmark"}};var xe=Oe,Me=n(37997),je=n.n(Me),Ee=function(e){(0,L.Z)(n,e);var t=(0,P.Z)(n);function n(){return(0,I.Z)(this,n),t.apply(this,arguments)}return(0,D.Z)(n,[{key:"zoomToUnit",value:function(e){var t=e.start,n=e.end,a=this.props,r=a.absoluteStart,i=a.absoluteEnd,o=w(t,n,S(t,n),r,i),l=o.newStartClamped,s=o.newEndClamped;this.props.onChange(l,s)}},{key:"render",value:function(){var e=this,t=this.props,n=t.labels,a=void 0===n?{}:n,i=t.start,o=t.end,l=t.absoluteStart,c=t.absoluteEnd,d=t.outerScale,m=t.outerStart,g=t.outerEnd,h=this.context.immediate,f=_(i,o),v="day";f>366?v="year":f>31?v="month":f<=1&&(v="hour");var p=function(e,t,n,a,r,i){for(var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{zoomTo:"Zoom to"},l=Math.max(k(t),k(a)),u=Math.min(k(n),k(r)),c=s()(l).utc().startOf(i),d=s()(u).utc().endOf(i),m=[],g=k(n)>k(r)?0:1,h=d.diff(c,i)+g,f=c,v=e(f),p=0;p<=h;p+=1){var b=f.add(1,i),y=e(b),w=y-v,S={id:f.format({year:"YYYY",month:"YYYY-MM",week:"YYYY-MM-DD",day:"YYYY-MM-DD",hour:"YYYY-MM-DD-HH"}[i]),x:v,width:w,label:E(f,i,w),hoverLabel:"".concat(E(f,i,1/0)," - ").concat(o.zoomTo," ").concat(o[i]),start:f.toISOString(),end:b.toISOString()};m.push(S),f=b,v=y}return m}(d,m,g,l,c,v,a);return(0,r.jsx)("div",{children:p.map((function(t){return(0,r.jsx)("div",{style:{left:t.x,width:t.width,transition:h?"none":"width ".concat(u,", left ").concat(u)},className:je().unit,children:"hour"===v?(0,r.jsx)("div",{children:t.label}):(0,r.jsx)("button",{type:"button",onClick:function(){e.zoomToUnit(t)},title:t.hoverLabel,children:t.label})},t.id)}))})}}]),n}(i.Component);(0,T.Z)(Ee,"contextType",C),Ee.propTypes={labels:A().shape({zoomTo:A().string,day:A().string,year:A().string,month:A().string,hour:A().string}),onChange:A().func.isRequired,start:A().string.isRequired,end:A().string.isRequired,absoluteStart:A().string.isRequired,absoluteEnd:A().string.isRequired,outerStart:A().string.isRequired,outerEnd:A().string.isRequired,outerScale:A().func.isRequired},Ee.defaultProps={labels:{zoomTo:"Zoom to",day:"day",year:"year",month:"month",hour:"hour"}};var Ze,Ce=Ee,Re=["title","titleId"];function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ie.apply(this,arguments)}function De(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Te=function(e,t){var n=e.title,a=e.titleId,r=De(e,Re);return i.createElement("svg",Ie({width:11,height:10,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,Ze||(Ze=i.createElement("path",{d:"M4 1L1 5l3 4m3-8l3 4-3 4",stroke:"#FFF",strokeWidth:1.5,fill:"none"})))},Le=(0,i.forwardRef)(Te),Pe=n(73076),Fe=n.n(Pe),Ae=function(e){return(0,r.jsx)("button",{onMouseDown:e.onMouseDown,onTouchStart:e.onMouseDown,type:"button",title:e.dragLabel,className:z()(Fe().handler,(0,T.Z)({},Fe()._immediate,!0===e.dragging)),style:{left:!0===e.dragging?e.mouseX:e.x},children:(0,r.jsx)(Le,{})})};Ae.propTypes={dragLabel:A().string,onMouseDown:A().func.isRequired,dragging:A().bool.isRequired,x:A().number.isRequired,mouseX:A().number},Ae.defaultProps={dragLabel:"Drag to change the time range",mouseX:0};var Ne=Ae,ze=n(3376),Ye=n.n(ze),Be="DRAG_INNER",qe="DRAG_START",Ue="DRAG_END",Xe=function(e){(0,L.Z)(n,e);var t=(0,P.Z)(n);function n(){var e;return(0,I.Z)(this,n),e=t.call(this),(0,T.Z)((0,R.Z)(e),"getOuterScale",(0,Y.Z)((function(e,t,n){return(0,te.Z)().domain([new Date(e),new Date(t)]).range([0,n])}))),(0,T.Z)((0,R.Z)(e),"getOverallScale",(0,Y.Z)((function(e,t,n){return(0,te.Z)().domain([new Date(e),new Date(t)]).range([0,n])}))),(0,T.Z)((0,R.Z)(e),"getSvgTransform",(0,Y.Z)((function(e,t,n,a,r){var i=e(new Date(t)),o=a/(e(new Date(n))-i);return"translate(".concat(r,", 0) scale(").concat(o,", 1) translate(").concat(-i,", 0)")}))),(0,T.Z)((0,R.Z)(e),"onWindowResize",(function(){if(null!==e.graphContainer){var t=window.getComputedStyle(e.graphContainer),n=parseFloat(e.graphContainer.getBoundingClientRect().left),a=-e.node.offsetLeft,r=parseFloat(t.width),i=parseFloat(t.height),o=.15*r,l=.85*r,s=.7*r;e.setState({outerX:n,innerStartPx:o,innerEndPx:l,innerWidth:s,outerWidth:r,outerHeight:i,relativeOffsetX:a})}})),(0,T.Z)((0,R.Z)(e),"onEnterFrame",(function(t){void 0===e.frameTimestamp&&(e.frameTimestamp=t);var n=t-e.frameTimestamp;if(e.frameTimestamp=t,!0===e.state.outerDrag){var a=e.state,r=a.dragging,i=a.innerStartPx,o=a.innerEndPx,l=a.outerWidth,s=a.handlerMouseX,u=e.props,c=u.start,d=u.end,g=u.absoluteStart,h=u.absoluteEnd,f=u.onChange,v=r===qe?(i-s)/i:(s-o)/(l-o),p=(e.innerScale.invert(.6).getTime()-e.innerScale.invert(0).getTime())*n*v,b=c,y=d;r===qe?b=new Date(k(c)-p).toISOString():r===Ue&&(y=new Date(k(d)+p).toISOString());var _=w(b,y,S(c,d),g,h);f(_.newStartClamped,_.newEndClamped,m,r===Ue)}e.requestAnimationFrame=window.requestAnimationFrame(e.onEnterFrame)})),(0,T.Z)((0,R.Z)(e),"onMouseDown",(function(t,n){var a=e.state.outerX,r=t.clientX||t.changedTouches[0].clientX;e.lastX=r;var i=r-a;e.setState({dragging:n,handlerMouseX:i})})),(0,T.Z)((0,R.Z)(e),"throttledMouseMove",(0,ne.throttle)((function(t,n,a){e.props.onMouseMove(t,n,a)}),16)),(0,T.Z)((0,R.Z)(e),"notifyMouseLeave",(function(){e.throttledMouseMove(null,null,null)})),(0,T.Z)((0,R.Z)(e),"onMouseMove",(function(t){var n=e.props,a=n.start,r=n.end,i=n.absoluteStart,o=n.absoluteEnd,l=n.onChange,s=e.state,u=s.dragging,d=s.outerX,m=s.innerStartPx,g=s.innerEndPx,h=t.clientX||t.changedTouches&&t.changedTouches[0].clientX;if(void 0!==h){var f=h-d,v=e.node.contains(t.target)&&f>m&&f<g,p=t.target.contains(e.node),b=u===Be,y=!0===e.isHandlerZoomInValid(f).isValid,k=!0===e.isHandlerZoomOutValid(f);if(!v&&!p||b||y||k)e.notifyMouseLeave();else{var _=!O(a,r);e.throttledMouseMove(f,e.outerScale.invert,_)}if((b||y||k)&&!1===e.context.immediate&&e.context.toggleImmediate(!0),b){var x=S(a,r),M=h-e.lastX;e.lastX=t.clientX||t.changedTouches[0].clientX;var j=e.innerScale.invert(-M),E=new Date(j.getTime()+x),Z=w(j.toISOString(),E.toISOString(),x,i,o);l(Z.newStartClamped,Z.newEndClamped,c,u===Ue)}else y?e.setState({handlerMouseX:f,outerDrag:!1}):k&&e.setState({handlerMouseX:f,outerDrag:!0})}})),(0,T.Z)((0,R.Z)(e),"onMouseUp",(function(t){var n=e.props,a=n.start,r=n.end,i=n.onChange,o=n.stickToUnit,l=e.state,u=l.dragging,c=l.outerX,m=l.innerStartPx,f=l.outerDrag;if(null!==u){e.context.toggleImmediate(!1);var v=(t.clientX||t.changedTouches&&t.changedTouches[0].clientX||0)-c,p=e.isHandlerZoomInValid(v),b=a,y=r;p.isZoomIn&&(u===qe?b=e.innerScale.invert(p.clampedX-m).toISOString():u===Ue&&(y=e.innerScale.invert(p.clampedX-m).toISOString()));var k=(o?o(b,y):null)||(O(b,y)?"day":"hour");if((b=M(b,k))===(y=M(y,k)))y=s()(b).utc().add(1,k).toISOString();i(b,y,!0===f?g:u===Be?d:h),e.setState({dragging:null,handlerMouseX:null,outerDrag:!1})}})),e.state={innerStartPx:0,innerEndPx:0,innerWidth:50,outerWidth:100,outerHeight:50,dragging:null},e.graphContainer=null,e}return(0,D.Z)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onMouseUp),this.requestAnimationFrame=window.requestAnimationFrame(this.onEnterFrame),window.setTimeout(this.onWindowResize,10),window.ResizeObserver?(this.resizeObserver=new re.default(this.onWindowResize),this.resizeObserver.observe(this.node)):window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onMouseUp),window.cancelAnimationFrame(this.requestAnimationFrame),this.resizeObserver&&this.resizeObserver.unobserve(this.node)}},{key:"isHandlerZoomInValid",value:function(e){var t=this.state,n=t.dragging,a=t.innerStartPx,r=t.innerEndPx,i=n===qe&&e>a||n===Ue&&e<r;return{isZoomIn:i,isValid:i&&(n===qe&&e<r-20||n===Ue&&e>a+20),clampedX:n===qe?Math.min(e,r-20):Math.max(e,a+20)}}},{key:"isHandlerZoomOutValid",value:function(e){var t=this.state,n=t.dragging,a=t.innerStartPx,r=t.innerEndPx,i=t.outerWidth;return n===qe&&e<a&&e>0||n===Ue&&e>r&&e<i}},{key:"onLast30DaysClick",value:function(){var e=this.props,t=e.onChange,n=function(e){return j(30,"day",e)}(e.latestAvailableDataDate);t(n.start,n.end)}},{key:"render",value:function(){var e=this,t=this.props,n=t.labels,a=void 0===n?{}:n,i=t.start,o=t.end,l=t.absoluteStart,u=t.absoluteEnd,c=t.bookmarkStart,d=t.bookmarkEnd,m=t.bookmarkPlacement,g=t.onChange,h=t.onBookmarkChange,f=t.showLastUpdate,v=t.trackGraphOrientation,p=t.latestAvailableDataDate,b=t.displayWarningWhenInFuture,y=this.state,k=y.dragging,w=y.handlerMouseX,S=y.innerStartPx,_=y.innerEndPx,O=y.innerWidth,x=y.relativeOffsetX,M=y.outerWidth,j=y.outerHeight,E=this.context.immediate;this.innerScale=(0,te.Z)().domain([new Date(i),new Date(o)]).range([0,O]);var C=this.innerScale.invert(-S).toISOString(),R=this.innerScale.invert(M-S).toISOString();this.outerScale=this.getOuterScale(C,R,this.state.outerWidth);var I=this.getOverallScale(l,u,O),D=this.getSvgTransform(I,i,o,O,S),L=this.outerScale(new Date(u)),P=b&&new Date(i)>new Date(p);return(0,r.jsx)(Z.Provider,{value:{start:i,end:o,outerScale:this.outerScale,outerStart:C,outerEnd:R,outerWidth:M,outerHeight:j,graphHeight:j,innerWidth:O,innerStartPx:S,innerEndPx:_,overallScale:I,svgTransform:D,tooltipContainer:this.tooltipContainer,trackGraphOrientation:v},children:(0,r.jsxs)("div",{ref:function(t){return e.node=t},className:z()(Ye().Timeline,(0,T.Z)({},Ye()._disabled,E)),children:[void 0!==c&&null!==c&&""!==c&&(0,r.jsx)(xe,{labels:a.bookmark,scale:this.outerScale,bookmarkStart:c,bookmarkEnd:d,placement:m,minX:x,maxX:M,onDelete:function(){h(null,null)},onSelect:function(){g(c,d)}}),(0,r.jsx)("div",{className:Ye().graphContainer,ref:function(t){e.graphContainer=t},children:(0,r.jsxs)("div",{className:Ye().graph,onMouseDown:function(t){e.onMouseDown(t,Be)},onTouchStart:function(t){e.onMouseDown(t,Be)},children:[(0,r.jsx)(Ce,{labels:a,start:i,end:o,absoluteStart:l,absoluteEnd:u,outerScale:this.outerScale,outerStart:C,outerEnd:R,onChange:g}),this.props.children]})}),(0,r.jsx)("div",{className:Ye().tooltipContainer,ref:function(t){e.tooltipContainer=t}}),(0,r.jsx)("div",{className:z()(Ye().veilLeft,Ye().veil,(0,T.Z)({},Ye()._immediate,k===qe)),style:{width:k===qe?w:S}}),(0,r.jsx)(Ne,{dragLabel:a.dragLabel,onMouseDown:function(t){e.onMouseDown(t,qe)},onTouchStart:function(t){e.onMouseDown(t,qe)},dragging:this.state.dragging===qe,x:S,mouseX:this.state.handlerMouseX}),(0,r.jsx)(Ne,{dragLabel:a.dragLabel,onMouseDown:function(t){e.onMouseDown(t,Ue)},onTouchStart:function(t){e.onMouseDown(t,Ue)},dragging:this.state.dragging===Ue,x:_,mouseX:this.state.handlerMouseX}),(0,r.jsx)("div",{className:z()(Ye().veilRight,Ye().veil,(0,T.Z)({},Ye()._immediate,k===Ue)),style:{left:k===Ue?w:_,width:k===Ue?M-w:M-_}}),f&&L<=M&&(0,r.jsx)(ae.Spring,{native:!0,immediate:E,to:{left:L},children:function(e){return(0,r.jsxs)(ae.animated.div,{className:Ye().absoluteEnd,style:e,children:[(0,r.jsx)("div",{className:z()(Ye().lastUpdate,Ye().lastUpdateLabel),children:a.lastUpdate}),(0,r.jsx)("div",{className:Ye().lastUpdate,children:s()(u).utc().format("MMMM D YYYY")})]})}}),P&&(0,r.jsx)("div",{className:Ye().last30Days,children:(0,r.jsxs)("button",{onClick:function(){e.onLast30DaysClick()},children:["\u21a9\ufe0e ",a.timerange.last30days]})})]})})}}]),n}(i.PureComponent);(0,T.Z)(Xe,"contextType",C),Xe.propTypes={labels:A().shape({zoomTo:A().string,dragLabel:A().string,lastUpdate:A().string,bookmark:A().shape({goToBookmark:A().string,deleteBookmark:A().string})}),onChange:A().func.isRequired,onMouseLeave:A().func,onMouseMove:A().func,children:A().node,start:A().string.isRequired,end:A().string.isRequired,absoluteStart:A().string.isRequired,absoluteEnd:A().string.isRequired,latestAvailableDataDate:A().string.isRequired,onBookmarkChange:A().func,bookmarkStart:A().string,bookmarkEnd:A().string,bookmarkPlacement:A().string,stickToUnit:A().func,showLastUpdate:A().bool,displayWarningWhenInFuture:A().bool},Xe.defaultProps={labels:{dragLabel:"Drag to change the time range",lastUpdate:"Last update",bookmark:{goToBookmark:"Go to your bookmarked time range",deleteBookmark:"Delete time range bookmark"}},bookmarkStart:null,bookmarkEnd:null,bookmarkPlacement:"top",children:null,displayWarningWhenInFuture:!0,onBookmarkChange:function(){},onMouseLeave:function(){},onMouseMove:function(){},showLastUpdate:!0};var We,Ve=Xe,He=n(93963),Ge=["title","titleId"];function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ke.apply(this,arguments)}function Je(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Qe,$e=function(e,t){var n=e.title,a=e.titleId,r=Je(e,Ge);return i.createElement("svg",Ke({width:12,height:16,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,We||(We=i.createElement("path",{d:"M6 12v-2l2.66 2.66L6 15.34v-2a5.14 5.14 0 0 1-3.77-1.57A5.14 5.14 0 0 1 .66 8c0-1.04.28-1.99.84-2.84l.97.96A3.8 3.8 0 0 0 2 8c0 1.1.4 2.05 1.17 2.83A3.85 3.85 0 0 0 6 12zm0-9.34c1.46 0 2.71.52 3.77 1.57A5.14 5.14 0 0 1 11.34 8c0 1.04-.28 1.99-.84 2.84l-.97-.96A3.8 3.8 0 0 0 10 8c0-1.1-.4-2.05-1.17-2.83A3.85 3.85 0 0 0 6 4v2L3.34 3.34 6 .66v2z",fillRule:"evenodd"})))},et=(0,i.forwardRef)($e),tt=["title","titleId"];function nt(){return nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nt.apply(this,arguments)}function at(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var rt,it=function(e,t){var n=e.title,a=e.titleId,r=at(e,tt);return i.createElement("svg",nt({width:7,height:7,viewBox:"0 0 7 7",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,Qe||(Qe=i.createElement("path",{d:"M7 0v7L2 3.5 7 0zM1 0v7H0V0h1z",fill:"#FFF",fillRule:"evenodd"})))},ot=(0,i.forwardRef)(it),lt=["title","titleId"];function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},st.apply(this,arguments)}function ut(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ct,dt=function(e,t){var n=e.title,a=e.titleId,r=ut(e,lt);return i.createElement("svg",st({width:13,height:16,viewBox:"0 0 13 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,rt||(rt=i.createElement("path",{d:"M.5 1.79v12.42a.5.5 0 0 0 .762.426l10.092-6.21a.5.5 0 0 0 0-.852L1.262 1.364A.5.5 0 0 0 .5 1.79z",fill:"#FFF",stroke:"#FFF",fillRule:"evenodd"})))},mt=(0,i.forwardRef)(dt),gt=["title","titleId"];function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ht.apply(this,arguments)}function ft(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var vt,pt=function(e,t){var n=e.title,a=e.titleId,r=ft(e,gt);return i.createElement("svg",ht({width:10,height:11,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,ct||(ct=i.createElement("path",{d:"M0 0h3.077v11H0V0zm6.923 0H10v11H6.923V0z",fill:"#FFF"})))},bt=(0,i.forwardRef)(pt),yt=["title","titleId"];function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kt.apply(this,arguments)}function wt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var St=function(e,t){var n=e.title,a=e.titleId,r=wt(e,yt);return i.createElement("svg",kt({width:7,height:7,viewBox:"0 0 7 7",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,vt||(vt=i.createElement("path",{d:"M0 0l5 3.5L0 7V0zm6 0h1v7H6V0z",fill:"#FFF",fillRule:"evenodd"})))},_t=(0,i.forwardRef)(St),Ot=n(55404),xt=n.n(Ot),Mt=[1,2,3,5,10],jt=function(e){(0,L.Z)(n,e);var t=(0,P.Z)(n);function n(){var e;return(0,I.Z)(this,n),e=t.call(this),(0,T.Z)((0,R.Z)(e),"lastUpdateMs",null),(0,T.Z)((0,R.Z)(e),"getStep",(0,Y.Z)((function(e,t,n){var a=.001*Mt[n],r=new Date(e).getTime(),i=new Date(t).getTime();return(0,He.Z)().range([0,1]).domain([r,i]).invert(a)-r}))),(0,T.Z)((0,R.Z)(e),"update",(function(t){var n=e.props,a=n.onTick,r=n.start,i=n.end,o=n.absoluteStart,l=e.state,s=l.speedStep,u=l.loop,c=e.getStep(r,i,s)*t,d=new Date(r).getTime()+c,m=new Date(i).getTime()+c,g=m-d,h=new Date(d).toISOString(),f=new Date(m).toISOString(),v=new Date(Date.now()).toISOString(),p=w(h,f,g,o,v),b=p.newStartClamped,y=p.newEndClamped,k=p.clamped;(a(b,y),"end"===k)&&(!0===u?a(o,new Date(new Date(o).getTime()+g).toISOString()):e.togglePlay(!1));if("end"!==k||!0===u)return!0})),(0,T.Z)((0,R.Z)(e),"tick",(function(t){null===e.lastUpdateMs&&(e.lastUpdateMs=t);var n=(t-e.lastUpdateMs)/(1e3/60),a=e.update(n);e.lastUpdateMs=t,!0===a&&(e.requestAnimationFrame=window.requestAnimationFrame(e.tick))})),(0,T.Z)((0,R.Z)(e),"togglePlay",(function(t){var n=e.state.playing,a=e.props.onTogglePlay,r=void 0===t?!n:t;e.lastUpdateMs=null,r?(e.context.toggleImmediate(!0),e.requestAnimationFrame=window.requestAnimationFrame(e.tick)):(e.context.toggleImmediate(!1),window.cancelAnimationFrame(e.requestAnimationFrame)),e.setState({playing:r}),a(r)})),(0,T.Z)((0,R.Z)(e),"onPlayToggleClick",(function(){e.togglePlay()})),(0,T.Z)((0,R.Z)(e),"toggleLoop",(function(){e.setState((function(e){return{loop:!e.loop}}))})),(0,T.Z)((0,R.Z)(e),"onForwardClick",(function(){e.update(100)})),(0,T.Z)((0,R.Z)(e),"onBackwardClick",(function(){e.update(-100)})),(0,T.Z)((0,R.Z)(e),"onSpeedClick",(function(){var t=e.state.speedStep,n=t===Mt.length-1?0:t+1;e.setState({speedStep:n})})),e.state={playing:!1,speedStep:0,loop:!1},e}return(0,D.Z)(n,[{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.requestAnimationFrame)}},{key:"render",value:function(){var e=this.state,t=e.playing,n=e.loop,a=e.speedStep,i=this.props,o=i.labels,l=i.end===i.absoluteEnd&&!0!==n;return(0,r.jsxs)("div",{className:z()("print-hidden",xt().playbackActions,(0,T.Z)({},xt().playbackActionsActive,t)),children:[(0,r.jsx)("button",{type:"button",title:o.toogleAnimationLooping,onClick:this.toggleLoop,className:z()(H().uiButton,xt().secondary,xt().loop,(0,T.Z)({},xt().secondaryActive,n)),children:(0,r.jsx)(et,{})}),(0,r.jsx)("button",{type:"button",title:o.moveBack,onClick:this.onBackwardClick,className:z()(H().uiButton,xt().secondary,xt().back),children:(0,r.jsx)(ot,{})}),(0,r.jsx)("button",{type:"button",title:!0===t?o.pauseAnimation:o.playAnimation,onClick:this.onPlayToggleClick,disabled:l,className:z()(H().uiButton,xt().buttonBigger,xt().play),children:!0===t?(0,r.jsx)(bt,{}):(0,r.jsx)(mt,{})}),(0,r.jsx)("button",{type:"button",title:o.moveForward,onClick:this.onForwardClick,className:z()(H().uiButton,xt().secondary,xt().forward),children:(0,r.jsx)(_t,{})}),(0,r.jsxs)("button",{type:"button",title:o.changeAnimationSpeed,onClick:this.onSpeedClick,className:z()(H().uiButton,xt().secondary,xt().speed),children:[Mt[a],"x"]})]})}}]),n}(i.Component);(0,T.Z)(jt,"contextType",C),jt.propTypes={labels:A().shape({playAnimation:A().string,pauseAnimation:A().string,toogleAnimationLooping:A().string,moveBack:A().string,moveForward:A().string,changeAnimationSpeed:A().string}),onTick:A().func.isRequired,start:A().string.isRequired,end:A().string.isRequired,absoluteStart:A().string.isRequired,absoluteEnd:A().string.isRequired,onTogglePlay:A().func},jt.defaultProps={labels:{playAnimation:"Play animation",pauseAnimation:"Pause animation",toogleAnimationLooping:"Toggle animation looping",moveBack:"Move back",moveForward:"Move forward",changeAnimationSpeed:"Change animation speed"},onTogglePlay:function(){}};var Et,Zt=jt,Ct=["title","titleId"];function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rt.apply(this,arguments)}function It(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Dt,Tt=function(e,t){var n=e.title,a=e.titleId,r=It(e,Ct);return i.createElement("svg",Rt({width:16,height:15,ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,Et||(Et=i.createElement("path",{fill:"#FFF",d:"M1.06 5v8a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1V5h-13zm14-2v10a2 2 0 0 1-2 2h-11a2 2 0 0 1-2-2V3c0-1.1.9-2 2-2v.5a1.5 1.5 0 0 0 3 0V1h5v.5a1.5 1.5 0 0 0 3 0V1a2 2 0 0 1 2 2zm-9 4v5l-3-2.5 3-2.5zm3 0v5l3-2.5-3-2.5zm-5.5-7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 1 0v-1a.5.5 0 0 0-.5-.5zm8 0a.5.5 0 0 0-.5.5v1a.5.5 0 1 0 1 0v-1a.5.5 0 0 0-.5-.5z"})))},Lt=(0,i.forwardRef)(Tt),Pt=["title","titleId"];function Ft(){return Ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ft.apply(this,arguments)}function At(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Nt,zt=function(e,t){var n=e.title,a=e.titleId,r=At(e,Pt);return i.createElement("svg",Ft({width:11,height:14,viewBox:"0 0 11 14",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,Dt||(Dt=i.createElement("path",{stroke:"#FFF",strokeWidth:1.5,d:"M1 1h9v12l-4.5-3L1 13z",fill:"none",strokeLinejoin:"round"})))},Yt=(0,i.forwardRef)(zt),Bt=["title","titleId"];function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qt.apply(this,arguments)}function Ut(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Xt,Wt=function(e,t){var n=e.title,a=e.titleId,r=Ut(e,Bt);return i.createElement("svg",qt({width:9,height:3,viewBox:"0 0 9 3",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,Nt||(Nt=i.createElement("rect",{width:7,height:1,rx:.5,transform:"translate(1 1)",fill:"#FFF",stroke:"#FFF",strokeWidth:.5,strokeLinecap:"round",strokeLinejoin:"round"})))},Vt=(0,i.forwardRef)(Wt),Ht=["title","titleId"];function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gt.apply(this,arguments)}function Kt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Jt=function(e,t){var n=e.title,a=e.titleId,r=Kt(e,Ht);return i.createElement("svg",Gt({width:9,height:9,viewBox:"0 0 9 9",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?i.createElement("title",{id:a},n):null,Xt||(Xt=i.createElement("g",{transform:"translate(1 1)",fill:"#FFF",stroke:"#FFF",strokeWidth:.5,strokeLinecap:"round",strokeLinejoin:"round"},i.createElement("rect",{y:3,width:7,height:1,rx:.5}),i.createElement("rect",{transform:"rotate(90 3.5 3.5)",y:3,width:7,height:1,rx:.5}))))},Qt=(0,i.forwardRef)(Jt);s().extend(q()),s().extend(X());var $t=864e5,en=function(e,t){var n=s()(new Date);return n.add(e,t).diff(n)},tn=function(e,t,n,a,r){var i=new Date(t).getTime()-new Date(e).getTime(),o=t,l=e;return i>a?!0===r?o=new Date(new Date(e).getTime()+a).toISOString():l=new Date(new Date(t).getTime()-a).toISOString():i<n&&(!0===r?o=new Date(new Date(e).getTime()+n).toISOString():l=new Date(new Date(t).getTime()-n).toISOString()),{clampedStart:l,clampedEnd:o}},nn=function(e){(0,L.Z)(n,e);var t=(0,P.Z)(n);function n(){var e;return(0,I.Z)(this,n),e=t.call(this),(0,T.Z)((0,R.Z)(e),"getMaximumRangeMs",(0,Y.Z)((function(e,t){return null===e?Number.POSITIVE_INFINITY:en(e,t)}))),(0,T.Z)((0,R.Z)(e),"getMinimumRangeMs",(0,Y.Z)((function(e,t){return null===e?36e5:en(e,t)}))),(0,T.Z)((0,R.Z)(e),"toggleTimeRangeSelector",(function(){e.setState((function(e){return{showTimeRangeSelector:!e.showTimeRangeSelector}}))})),(0,T.Z)((0,R.Z)(e),"setBookmark",(function(){var t=e.props,n=t.start,a=t.end,r=t.onBookmarkChange;null!==r&&r(n,a)})),(0,T.Z)((0,R.Z)(e),"setLocale",(0,Y.Z)((function(e){return s().locale(e)}))),(0,T.Z)((0,R.Z)(e),"onTimeRangeSelectorSubmit",(function(t,n){e.notifyChange(t,n,v),e.setState({showTimeRangeSelector:!1})})),(0,T.Z)((0,R.Z)(e),"zoom",(function(t){var n,a,r,i=e.props,o=i.start,l=i.end,u=i.absoluteStart,c=i.absoluteEnd,d=Math.round(_(o,l)),m="day";if("in"===t){r=p,n=[365,32,30,7,1];for(var g=0;g<n.length;g+=1){var h=n[g];if(d>h){a=h;break}}void 0===a&&(a=23.9,m="hour")}else if("out"===t){r=b,n=[1,7,30,32,365];for(var f=0;f<n.length;f+=1){var v=n[f];if(d<v){a=v;break}}if(void 0===a)return void e.notifyChange(u,c,r)}var y="hour"===m?36e5:$t,S=k(o)+(k(l)-k(o))/2-a*y/2,O=s()(S).utc().startOf(m),x=O.add(a,m).toISOString(),M=a*y,j=w(O.toISOString(),x,M,u,c),E=j.newStartClamped,Z=j.newEndClamped;e.notifyChange(E,Z,r)})),(0,T.Z)((0,R.Z)(e),"notifyChange",(function(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=tn(t,n,e.minimumRangeMs,e.maximumRangeMs,r),o=i.clampedStart,l=i.clampedEnd,s=e.props.onChange,u={start:o,end:l,source:a};s(u)})),(0,T.Z)((0,R.Z)(e),"onPlaybackTick",(function(t,n){e.notifyChange(t,n,y)})),(0,T.Z)((0,R.Z)(e),"onTogglePlay",(function(t){(0,e.props.onTogglePlay)(t)})),e.toggleImmediate=function(t){e.setState({immediate:t})},e.interval=null,e.state={immediate:!1,showTimeRangeSelector:!1,absoluteEnd:null},e}return(0,D.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.start,n=e.end;this.notifyChange(t,n,f)}},{key:"render",value:function(){var e=this,t=this.props,n=t.labels,a=void 0===n?{}:n,i=t.start,o=t.end,l=t.absoluteStart,s=t.bookmarkStart,u=t.bookmarkEnd,c=t.bookmarkPlacement,d=t.enablePlayback,m=t.locale,g=t.minimumRange,h=t.minimumRangeUnit,f=t.maximumRange,v=t.maximumRangeUnit,p=t.stickToUnit,b=t.displayWarningWhenInFuture,y=this.state.immediate;this.setLocale(m);var w=this.state,S=w.showTimeRangeSelector,x=w.absoluteEnd;this.maximumRangeMs=this.getMaximumRangeMs(f,v),this.minimumRangeMs=this.getMinimumRangeMs(g,h);var M=O(i,o),j=_(i,o)<=_(l,x)-1,E=void 0!==s&&null!==s&&void 0!==u&&null!==u,Z=E&&k(s)===k(i)&&k(u)===k(o);return(0,r.jsx)(C.Provider,{value:{immediate:y,toggleImmediate:this.toggleImmediate},children:(0,r.jsx)(W.RecoilRoot,{override:!1,children:(0,r.jsxs)("div",{className:H().Timebar,children:[d&&(0,r.jsx)(Zt,{labels:a.playback,start:i,end:o,absoluteStart:l,absoluteEnd:x,onTick:this.onPlaybackTick,onTogglePlay:this.onTogglePlay}),(0,r.jsxs)("div",{className:z()("print-hidden",H().timeActions),children:[S&&(0,r.jsx)(ee,{labels:a.timerange,start:i,end:o,absoluteStart:l,absoluteEnd:x,onSubmit:this.onTimeRangeSelectorSubmit,onDiscard:this.toggleTimeRangeSelector,latestAvailableDataDate:this.props.latestAvailableDataDate}),(0,r.jsx)("div",{className:z()("print-hidden",H().timeRangeContainer),children:(0,r.jsx)("button",{type:"button",title:a.timerange.title,className:z()(H().uiButton,H().timeRange),disabled:y,onClick:this.toggleTimeRangeSelector,children:(0,r.jsx)(Lt,{})})}),(0,r.jsx)("button",{type:"button",title:a.setBookmark,className:z()("print-hidden",H().uiButton,H().bookmark),onClick:this.setBookmark,disabled:y||!0===Z,children:E?(0,r.jsx)(ce,{}):(0,r.jsx)(Yt,{})}),(0,r.jsxs)("div",{className:z()("print-hidden",H().timeScale),children:[(0,r.jsx)("button",{type:"button",title:a.zoomOut,disabled:y||!1===j,onClick:function(){e.zoom("out")},className:z()(H().uiButton,H().out),children:(0,r.jsx)(Vt,{})}),(0,r.jsx)("button",{type:"button",title:a.zoomIn,disabled:y||!1===M,onClick:function(){e.zoom("in")},className:z()(H().uiButton,H().in),children:(0,r.jsx)(Qt,{})})]})]}),(0,r.jsx)(Ve,{children:this.props.children,start:i,end:o,labels:a,onChange:this.notifyChange,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,absoluteStart:l,absoluteEnd:x,onBookmarkChange:this.props.onBookmarkChange,bookmarkStart:s,bookmarkEnd:u,bookmarkPlacement:c,showLastUpdate:this.props.showLastUpdate,latestAvailableDataDate:this.props.latestAvailableDataDate,trackGraphOrientation:this.props.trackGraphOrientation,stickToUnit:p,displayWarningWhenInFuture:b})]})})})}}],[{key:"getDerivedStateFromProps",value:function(e){return{absoluteEnd:s()(e.absoluteEnd).utc().endOf("day").toISOString()}}}]),n}(i.Component);nn.propTypes={labels:A().shape({playback:A().shape({playAnimation:A().string,pauseAnimation:A().string,toogleAnimationLooping:A().string,moveBack:A().string,moveForward:A().string,changeAnimationSpeed:A().string}),timerange:A().shape({title:A().string,start:A().string,end:A().string,last30days:A().string,last3months:A().string,last6months:A().string,lastYear:A().string,done:A().string}),bookmark:A().shape({goToBookmark:A().string,deleteBookmark:A().string}),lastUpdate:A().string,day:A().string,year:A().string,month:A().string,hour:A().string,setBookmark:A().string,zoomIn:A().string,zoomOut:A().string,zoomTo:A().string,timeRange:A().string}),start:A().string.isRequired,end:A().string.isRequired,onChange:A().func.isRequired,children:A().node,bookmarkStart:A().string,bookmarkEnd:A().string,bookmarkPlacement:A().string,onMouseLeave:A().func,onMouseMove:A().func,onBookmarkChange:A().func,absoluteStart:A().string.isRequired,absoluteEnd:A().string.isRequired,latestAvailableDataDate:A().string,enablePlayback:A().bool,onTogglePlay:A().func,minimumRange:A().number,minimumRangeUnit:A().string,maximumRange:A().number,maximumRangeUnit:A().string,stickToUnit:A().func,showLastUpdate:A().bool,locale:A().oneOf(["en","es","fr","id","pt","val"]),displayWarningWhenInFuture:A().bool},nn.defaultProps={latestAvailableDataDate:(new Date).toISOString(),labels:{playback:{playAnimation:"Play animation",pauseAnimation:"Pause animation",toogleAnimationLooping:"Toggle animation looping",moveBack:"Move back",moveForward:"Move forward",changeAnimationSpeed:"Change animation speed"},timerange:{title:"Select a time range",start:"start",end:"end",last30days:"Last 30 days",last3months:"Last 3 months",last6months:"Last 6 months",lastYear:"Last year",done:"Done"},bookmark:{goToBookmark:"Go to your bookmarked time range",deleteBookmark:"Delete time range bookmark"},dragLabel:"Drag to change the time range",lastUpdate:"Last update",setBookmark:"Bookmark current time range",day:"day",year:"year",month:"month",hour:"hour",zoomIn:"Zoom in",zoomTo:"Zoom to",zoomOut:"Zoom out"},bookmarkStart:null,bookmarkEnd:null,enablePlayback:!1,onTogglePlay:function(){},children:null,onMouseLeave:function(){},onMouseMove:function(){},bookmarkPlacement:"top",onBookmarkChange:function(){},minimumRange:null,minimumRangeUnit:"day",maximumRange:null,maximumRangeUnit:"month",showLastUpdate:!0,locale:"en",displayWarningWhenInFuture:!0};var an,rn=nn,on=n(1837),ln=function(){var e=(0,i.useContext)(Z),t=e.outerStart,n=e.outerEnd,a=e.outerWidth;return(0,i.useMemo)((function(){return(0,te.Z)().domain([new Date(t),new Date(n)]).range([0,a])}),[t,n,a])},sn=(an={},(0,T.Z)(an,on.GM.Fishing,1),(0,T.Z)(an,on.GM.Port,2),(0,T.Z)(an,on.GM.Gap,3),(0,T.Z)(an,on.GM.Loitering,4),(0,T.Z)(an,on.GM.Encounter,5),n(70865)),un=n(96670),cn=(0,W.atom)({key:"charts-data",default:{}}),dn=cn,mn=(0,W.atom)({key:"hovered-event",default:void 0});n(71413);var gn=n(28316),hn=n(68),fn=n.n(hn);s().extend(X());var vn=function(e,t,n,a){if(!n)return{highlighterData:[]};var r=Object.entries(n);if(!r.length)return{highlighterData:[]};var i=[],o={};return r.forEach((function(n,r){var l,s=n[0],u=n[1];u.active&&(o[s]=[],null===(l=u.data)||void 0===l||l.forEach((function(n,l){var u=function(e,t,n){return t.chunks.filter((function(a,r){var i,o=a.end||(null===(i=t.chunks[r+1])||void 0===i?void 0:i.start)||Number.NEGATIVE_INFINITY,l=o-a.start;if(l>n&&a.end)return e>a.start&&e<o;var s=a.start+l/2;return e>s-n/2&&e<s+n/2}))}(e,n,t),c=u?u[u.length-1]:void 0;if(i[l]||(i[l]={color:n.color,labels:[]}),c){var d,m,g=c.id===a;"tracksEvents"!==s&&"tracksGraphs"!==s||(i[l].expanded=g),n.defaultLabel&&!i[l].defaultLabel&&(i[l].defaultLabel={value:n.defaultLabel});var h=function(e,t){if(t.values)return t.values.find((function(n,a){if(!t.values)return!1;var r=t.values[a+1],i=(null===r||void 0===r?void 0:r.timestamp)||t.end||Number.NEGATIVE_INFINITY;return e>n.timestamp&&e<i}))}(e,c),f={chunk:c,value:h,item:n,itemIndex:l,expanded:g},v=n.getHighlighterLabel?"string"===typeof n.getHighlighterLabel?n.getHighlighterLabel:n.getHighlighterLabel(f):null===h||void 0===h||null===(d=h.value)||void 0===d?void 0:d.toString();v&&(i[l].labels[r]={value:v});var p,b,y=n.getHighlighterIcon?"string"===typeof n.getHighlighterIcon?n.getHighlighterIcon:n.getHighlighterIcon(f):"";if(i[l].icon=y,null===(m=c.cluster)||void 0===m?void 0:m.ids)o[s]=null===(p=o[s])||void 0===p?void 0:p.concat((null===(b=c.cluster)||void 0===b?void 0:b.ids)||[]);else if(c.id){var k;o[s]=null===(k=o[s])||void 0===k?void 0:k.concat([c.id])}}})))})),{highlighterData:i=i.flatMap((function(e){var t;return!e.defaultLabel&&(null===(t=e.labels)||void 0===t?void 0:t.every((function(e){return!(null===e||void 0===e?void 0:e.value)})))?[]:e})),highlightedChunks:o}},pn=function(e){var t=e.hoverStart,n=e.hoverEnd,a=e.onHighlightChunks,o=e.dateCallback,l=(0,i.useContext)(Z),u=l.graphHeight,c=l.tooltipContainer,d=l.outerStart,m=l.outerEnd,g=ln(),h=(0,i.useMemo)((function(){return function(e,t,n,a){var r,i=new Date(e),o=new Date(t),l=n(i),u=n(o)-l,c=Math.round(i.getTime()+(o.getTime()-i.getTime())/2),d=new Date(c),m=n(d);if(a)r=a(c);else{var g=x(e,t);r=s()(d).utc().format(g)}return{left:l,center:m,width:u,centerMs:c,dateLabel:r}}(t,n,g,o)}),[t,n,g,o]),f=h.width,v=h.left,p=h.center,b=h.centerMs,y=h.dateLabel,k=(0,W.useRecoilValue)(dn),w=(0,W.useRecoilValue)(mn),S=(0,i.useMemo)((function(){return+g.invert(15)-+g.invert(0)}),[d,m]),_=(0,i.useMemo)((function(){return vn(b,S,k,w)}),[b,k,S,w]),O=_.highlighterData,M=_.highlightedChunks;return(0,i.useEffect)((function(){a&&a(M)}),[M,a]),(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("div",{className:fn().highlighter,style:{left:v,width:f,height:u},children:(0,r.jsx)("div",{className:fn().highlighterCenter,style:{left:p-v}})}),null!==c&&(0,gn.createPortal)((0,r.jsx)("div",{className:fn().tooltipContainer,style:{left:p},children:(0,r.jsxs)("div",{className:z()(fn().tooltip,(0,T.Z)({},fn().overflowRight,window.innerWidth-p<700)),children:[(0,r.jsx)("span",{className:fn().tooltipDate,children:y}),(null===O||void 0===O?void 0:O.length)>0&&(0,r.jsx)("ul",{children:O.map((function(e,t){var n;return e?(0,r.jsxs)("li",{className:z()(fn().tooltipItem,(0,T.Z)({},fn().expanded,e.expanded&&O.length>1)),children:[e.icon?(0,r.jsx)(G.JO,{icon:e.icon,style:{color:e.color}}):(0,r.jsx)("span",{className:fn().tooltipColor,style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{children:[e.defaultLabel&&(0,r.jsx)("span",{className:z()(fn().tooltipLabel,fn().isMain),children:e.defaultLabel.value}),null===(n=e.labels)||void 0===n?void 0:n.map((function(e,t){return(0,r.jsx)("span",{className:z()(fn().tooltipLabel),children:null===e||void 0===e?void 0:e.value},t)}))]})]},t):null}))})]})}),c)]})},bn=n(99839),yn=n(79880),kn=n(94662),wn=n(73729),Sn=n(61649),_n=function(e){var t=e.timeseries,n=e.dataviews,a=e.highlighterCallback,o=e.highlighterIconCallback,l=(0,i.useContext)(C).immediate,s=(0,i.useContext)(Z),c=s.overallScale,d=s.outerWidth,m=s.graphHeight,g=s.svgTransform,h=function(e,t,n,a){return e&&e.length&&(null===t||void 0===t?void 0:t.length)?t.map((function(t,r){var i,o=e.map((function(e){return{timestamp:e.date,value:e[r]}}));return{chunks:[{start:e[0].date,end:e[e.length-1].date,values:o}],color:null===(i=t.config)||void 0===i?void 0:i.color,getHighlighterLabel:n,getHighlighterIcon:a,props:{unit:"",dataviewId:t.id}}})):[]}(t,n,a,o);!function(e,t){var n=(0,W.useSetRecoilState)(cn),a=(0,i.useCallback)((function(e){var t=e.key,a=e.data,r=e.active,i=void 0===r||r;n((function(e){return(0,un.Z)((0,sn.Z)({},e),(0,T.Z)({},t,{data:a,active:i}))}))}),[n]);(0,i.useEffect)((function(){return a({key:e,data:t,active:!0}),function(){a({key:e,data:t,active:!1})}}),[t,e,a])}("activity",h);var f=(null===n||void 0===n?void 0:n.length)>0,v=(0,i.useMemo)((function(){var e=function(e,t,n){if(!e)return[];var a=Object.keys(null===e||void 0===e?void 0:e[0]).filter((function(e){return"frame"!==e&&"date"!==e})),r=a.length;if(!r)return[];var i=(0,bn.Z)().keys(a).offset(yn.Z)(e),o=(0,Sn.Z)(i,(function(e){return(0,Sn.Z)(e,(function(e){return e[1]}))})),l=(0,He.Z)().domain([0,o]).range([5,t/2-10]),s=(0,kn.Z)().x((function(e){return n(e.data.date)})).y0((function(e){var t=l(e[0]);return 1===r&&t<0?Math.min(t,-1):t})).y1((function(e){var t=l(e[1]);return 1===r&&t>0?Math.max(t,1):t})).curve(wn.cD);return i.map((function(e){return{path:s(e)}}))}(t,m,c);return e}),[t,m,c]),p=m/2-10;return(0,r.jsx)("svg",{width:d,height:m,children:(0,r.jsx)("g",{transform:g,style:{transition:l?"none":"transform ".concat(u)},children:f&&v&&v.map((function(e,t){var a;return n[t]?(0,r.jsx)("g",{transform:"translate(0, ".concat(p,")"),children:(0,r.jsx)("path",{d:e.path||"",fill:(null===(a=n[t].config)||void 0===a?void 0:a.color)||"#ffffff"})},t):null}))})})},On=n(42055),xn=n(52294),Mn=n(63898),jn=n(85242),En=n(93439),Zn=n(21883),Cn=n(73591),Rn=n(30206),In=n(10020),Dn=n(95948),Tn=n.n(Dn),Ln=function(){var e=(0,In.N)(),t=function(e){var t=(0,i.useState)(!1),n=t[0],a=t[1],r=(0,i.useState)(),o=r[0],l=r[1],s=(0,jn.cB)(),u=(0,Cn.R9)(),c=(0,jn.Nr)(u,400),d=(0,Rn.IG)(e),m=(0,Rn.LR)(d),g=!(0,Cn.OC)(u,c)||!(0,Rn.Eg)(d)||n,h=(0,i.useCallback)((0,ne.debounce)((function(e,t){var n=e.map((function(e){var n;return(0,un.Z)((0,sn.Z)({},e),{chunksFeatures:null===(n=e.chunksFeatures)||void 0===n?void 0:n.map((function(e){return(0,un.Z)((0,sn.Z)({},e),{features:e.features?(0,En.wS)(e.features,t):[]})}))})})),r=(0,Zn.hr)(n);l(r),a(!1)}),400),[l]);return(0,i.useEffect)((function(){var e=(0,Rn.Eg)(d);s||!e||m||(a(!0),h(d,c))}),[d,c,h,s]),{loading:g,error:m,stackedActivity:o}}(e),n=t.loading,a=t.stackedActivity;return t.error?(0,r.jsx)("div",{className:Tn().error,children:"There was a problem loading the data, please try refreshing the page"}):a&&a.length&&(null===e||void 0===e?void 0:e.length)?(0,r.jsx)("div",{className:z()((0,T.Z)({},Tn().loading,n)),children:(0,r.jsx)(_n,{timeseries:a,dataviews:e,highlighterIconCallback:"heatmap"},"stackedActivity")}):null},Pn=function(){var e=(0,a.Z)((0,xn.CI)(),1)[0],t=(0,i.useCallback)((function(e){return(0,Mn.RR)(e,{showUTCLabel:!0})}),[]);return e?(0,r.jsx)(pn,{hoverStart:e.start,hoverEnd:e.end,dateCallback:t}):null},Fn=function(){(0,xn.kx)();var e=(0,a.Z)((0,xn.xz)(),2),t=e[0],n=e[1],l=(0,xn.CI)()[1],s=(0,i.useCallback)((function(e){var t=e.start,a=e.end;n({start:t,end:a})}),[n]),u=(0,i.useCallback)((function(e,t){if(null===e||void 0===e||isNaN(e))l(void 0);else try{var n=t(e-10).toISOString(),a=t(e+10).toISOString(),r=o.ou.fromISO(n),i=o.ou.fromISO(a),s=i.diff(r,"hours");if(s.hours<1){var u=r.minus({hours:s.hours/2}).toISO(),c=i.plus({hours:s.hours/2}).toISO();l({start:u,end:c})}else l({start:n,end:a})}catch(d){console.log(e),console.warn(d)}}),[l]);return(null===t||void 0===t?void 0:t.start)&&(null===t||void 0===t?void 0:t.end)?(0,r.jsx)("div",{className:Tn().timebarWrapper,children:(0,r.jsxs)(rn,{enablePlayback:!0,start:null===t||void 0===t?void 0:t.start,end:null===t||void 0===t?void 0:t.end,absoluteStart:On.gZ.availableStart,absoluteEnd:On.gZ.availableEnd,onChange:s,onMouseMove:u,displayWarningWhenInFuture:!1,showLastUpdate:!1,children:[(0,r.jsx)(Ln,{}),(0,r.jsx)(Pn,{})]})}):null},An=(0,i.memo)(Fn)},52294:function(e,t,n){"use strict";n.d(t,{CI:function(){return f},kx:function(){return v},xz:function(){return h}});var a=n(2784),r=n(53476),i=n(68578),o=n(19102),l=n(85242),s=n(42055),u={start:s.gZ.start,end:s.gZ.end},c=(0,o.Ry)({start:(0,o.Z_)(),end:(0,o.Z_)()}),d=(0,r.atom)({key:"timerange",default:u,effects:[(0,i.urlSyncEffect)({refine:c,history:"replace",syncDefault:!0})]}),m=(0,r.atom)({key:"localTimerange",default:d,effects:[]}),g=(0,r.atom)({key:"highlightedTimerange",default:null,effects:[]}),h=function(){return(0,r.useRecoilState)(m)},f=function(){return(0,r.useRecoilState)(g)},v=function(){var e=(0,r.useRecoilValue)(m),t=(0,r.useSetRecoilState)(d),n=(0,l.Nr)(e,s.rF);(0,a.useEffect)((function(){t(n)}),[n,t])}},63898:function(e,t,n){"use strict";n.d(t,{RR:function(){return l},X_:function(){return s}});var a=n(70865),r=n(26297),i=n(99490),o=n(42055),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,a=void 0===n?i.ou.DATE_MED:n,r=t.locale,l=void 0===r?o.MV:r,s=t.showUTCLabel,u=void 0!==s&&s,c="number"===typeof e?i.ou.fromMillis(e):i.ou.fromISO(e);return"".concat(c.toUTC().setLocale(l).toLocaleString(a)).concat(a===i.ou.DATETIME_MED||u?" ".concat("UTC"):"")},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.locale,i=void 0===n?o.MV:n,l=(0,r.Z)(t,["locale"]),s="string"===e?parseFloat(e):e;try{return new Intl.NumberFormat(i,(0,a.Z)({maximumFractionDigits:e<10?2:0},l)).format(s)}catch(u){return console.warn(u),e}}},21883:function(e,t,n){"use strict";n.d(t,{g3:function(){return i},hr:function(){return m}});var a=n(71206),r=n(67601),i=function(e,t){var n=t.timeChunks,i=null===n||void 0===n?void 0:n.activeChunkFrame,o=(0,r._C)(n);return n.chunks.map((function(r){return e.flatMap((function(e){var r=e.properties;return((0,a.so)({rawValues:r.rawValues,frame:i,delta:Math.max(1,n.deltaInIntervalUnits),quantizeOffset:o.quantizeOffset,sublayerCount:null===t||void 0===t?void 0:t.numSublayers,aggregationOperation:null===t||void 0===t?void 0:t.aggregationOperation,sublayerCombinationMode:null===t||void 0===t?void 0:t.sublayerCombinationMode,multiplier:null===t||void 0===t?void 0:t.multiplier})||[]).flatMap((function(e){return isNaN(e)||0===e||null===e?[]:e}))}))})).flatMap((function(e){return e})).sort((function(e,t){return e-t}))},o=n(47842),l=n(70865),s=n(96670),u=n(66383),c=n(36234),d=n(76635),m=function(e){return(0,d.uniqBy)(e,"sourceId").map((function(e){var t=e.chunksFeatures,n=e.metadata,i=e.state;if(!i.loaded||i.error||!t||!n)return[];var d=function(e){var t=e.chunksFeatures,n=e.numSublayers,i=e.interval,d=e.visibleSublayers,m=e.aggregationOperation,g=e.multiplier,h=null===t||void 0===t?void 0:t.flatMap((function(e){var t=e.features,h=e.quantizeOffset;if((null===t||void 0===t?void 0:t.length)>0){var f=(0,a.E8)(t,n,h,m).values.map((function(e){var t=Object.fromEntries(Object.entries(e).map((function(e){var t=(0,u.Z)(e,2),n=t[0],r=t[1],i="frame"===n||!0===d[parseInt(n)]?r:0;return[n,(0,a.KN)(i,{multiplier:g})]})));return(0,s.Z)((0,l.Z)({},t),{date:(0,r.aP)(e.frame,i).getTime()})}));if(m===a.YB.Avg){var v=f[f.length-1],p=c.ou.fromMillis(v.date),b="10days"===i?{day:10}:(0,o.Z)({},i,1),y=c.ou.fromMillis(v.date).plus(b).diff(p).milliseconds;return f.concat((0,s.Z)((0,l.Z)({},v),{frame:v.frame+1,date:v.date+y}))}return f}return[]}));return h}({chunksFeatures:t,interval:n.timeChunks.interval,numSublayers:n.numSublayers,visibleSublayers:n.visibleSublayers,aggregationOperation:n.aggregationOperation,multiplier:n.multiplier});return d}))[0]}},95948:function(e){e.exports={timebarWrapper:"Timebar_timebarWrapper__9Db6V"}},68:function(e){e.exports={highlighter:"highlighter_highlighter__Q2JJz",tooltipContainer:"highlighter_tooltipContainer__G6oLi",highlighterCenter:"highlighter_highlighterCenter__sRqLV",tooltip:"highlighter_tooltip__aYwBv",overflowRight:"highlighter_overflowRight__7zxeu",tooltipDate:"highlighter_tooltipDate__XQEyS",tooltipItem:"highlighter_tooltipItem__v2_7W",expanded:"highlighter_expanded__PQ562",tooltipLabel:"highlighter_tooltipLabel__9j8XW",isMain:"highlighter_isMain__w5evy"}},62428:function(e){e.exports={Bookmark:"bookmark_Bookmark__V8qXz",bottomPlacement:"bookmark_bottomPlacement__E5TXj",_immediate:"bookmark__immediate__Sozfi",main:"bookmark_main__v8iYF",_compact:"bookmark__compact__VG3cp",_overflowingRight:"bookmark__overflowingRight__dvVus",_overflowingLeft:"bookmark__overflowingLeft__8zD_3",delete:"bookmark_delete__uUtWQ",title:"bookmark_title__hJvbv",leftArrow:"bookmark_leftArrow__PncPn",rightArrow:"bookmark_rightArrow__sz_MV",icon:"bookmark_icon__yCICC",_point:"bookmark__point__ZVggH"}},55404:function(e){e.exports={playbackActions:"playback_playbackActions__6Vykb",secondary:"playback_secondary__mgVPy",playbackActionsActive:"playback_playbackActionsActive__jHUWD",secondaryActive:"playback_secondaryActive__bXvjw",buttonBigger:"playback_buttonBigger__z_Pdr",loop:"playback_loop__6zTw9",speed:"playback_speed__5a3O4",play:"playback_play__4uR_n"}},73076:function(e){e.exports={handler:"timeline-handler_handler__RAXmT",_immediate:"timeline-handler__immediate__uHSHb"}},37997:function(e){e.exports={unit:"timeline-units_unit__mdna7"}},3376:function(e){e.exports={Timeline:"timeline_Timeline__xhv_B",_disabled:"timeline__disabled__ipa7V",graphContainer:"timeline_graphContainer__IsgAs",graph:"timeline_graph__JR4aY",veil:"timeline_veil__U2CQn",veilLeft:"timeline_veilLeft__wuh1A",veilRight:"timeline_veilRight__NHq5O",_immediate:"timeline__immediate__mI97F",absoluteEnd:"timeline_absoluteEnd__gi0p_",lastUpdate:"timeline_lastUpdate__qp7Yd",lastUpdateLabel:"timeline_lastUpdateLabel__0fKBC",tooltipContainer:"timeline_tooltipContainer__cWOmr",last30Days:"timeline_last30Days__9NTeo"}},57735:function(e){e.exports={TimeRangeSelector:"timerange-selector_TimeRangeSelector__2L_sZ",veil:"timerange-selector_veil__LG0zi",inner:"timerange-selector_inner__B94h0",title:"timerange-selector_title__9IEY_",selectorsContainer:"timerange-selector_selectorsContainer__t9y_k",selectorGroup:"timerange-selector_selectorGroup___zoL4",selectorLabel:"timerange-selector_selectorLabel__bkK54",input:"timerange-selector_input__6ojD1",actions:"timerange-selector_actions__rtVvL",cta:"timerange-selector_cta__VtXJG",lastX:"timerange-selector_lastX__bMP8w",disabled:"timerange-selector_disabled__etKKY",secondary:"timerange-selector_secondary__KmNN_"}},20422:function(e){e.exports={Timebar:"timebar_Timebar__LI_OC",uiButton:"timebar_uiButton__M_G9z",timeActions:"timebar_timeActions__S_wja",timeRange:"timebar_timeRange__X2k7B",timeScale:"timebar_timeScale__XetWm",timeRangeContainer:"timebar_timeRangeContainer__bqblE",playbackActions:"timebar_playbackActions__UXyoC",bookmark:"timebar_bookmark__6MR8n"}}}]);